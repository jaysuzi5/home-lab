global:
  storageClass: "nfs-client"

kraft:
  enabled: true
  logRetentionHours: 168  # 7 days

controllerReplicaCount: 3
processRoles: "controller,broker"

persistence:
  enabled: true
  storageClass: "nfs-client"
  size: 20Gi
  accessModes:
    - ReadWriteOnce

auth:
  clientProtocol: plaintext
  interBrokerProtocol: sasl
  saslMechanisms: ["PLAIN"]
  saslAllowedMechanisms: ["PLAIN"]

kraftConfigOverrides:
  advertised.listeners: "CLIENT://kafka.kafka.svc.cluster.local:9092,INTERNAL://kafka-controller-headless.kafka.svc.cluster.local:9094"
  listeners: "CLIENT://:9092,INTERNAL://:9094"
  listener.security.protocol.map: "CLIENT:PLAINTEXT,INTERNAL:SASL_PLAINTEXT" 
  inter.broker.listener.name: "INTERNAL"
  controller.listener.names: "INTERNAL"
  advertised.host.name: "kafka.kafka.svc.cluster.local"
  advertised.port: 9092

resources:
  requests:
    memory: 2Gi
    cpu: 1000m
  limits:
    memory: 4Gi
    cpu: 2000m

controller:
  quorum:
    electionTimeoutMs: 10000
    fetchTimeoutMs: 10000

service:
  type: ClusterIP
  ports:
    client: 9092
    internal: 9094
    controller: 9093

affinity:
  podAntiAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      - labelSelector:
          matchExpressions:
            - key: app.kubernetes.io/component
              operator: In
              values: ["kafka"]
        topologyKey: kubernetes.io/hostname

metrics:
  enabled: true
  serviceMonitor:
    enabled: true
    namespace: monitoring